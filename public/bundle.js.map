{"version":3,"file":"bundle.js","sources":["../node_modules/svelte/internal.mjs","../src/helpers/util.js","../src/helpers/EditorModal.svelte","../src/helpers/EditorColorPicker.svelte","../src/helpers/actions.js","../node_modules/svelte/store.mjs","../src/Editor.svelte","../src/main.js"],"sourcesContent":["function noop() {}\n\nconst identity = x => x;\n\nfunction assign(tar, src) {\n\tfor (const k in src) tar[k] = src[k];\n\treturn tar;\n}\n\nfunction is_promise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nfunction add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nfunction run(fn) {\n\treturn fn();\n}\n\nfunction blank_object() {\n\treturn Object.create(null);\n}\n\nfunction run_all(fns) {\n\tfns.forEach(run);\n}\n\nfunction is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nfunction safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\nfunction validate_store(store, name) {\n\tif (!store || typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nfunction subscribe(component, store, callback) {\n\tconst unsub = store.subscribe(callback);\n\n\tcomponent.$$.on_destroy.push(unsub.unsubscribe\n\t\t? () => unsub.unsubscribe()\n\t\t: unsub);\n}\n\nfunction create_slot(definition, ctx, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, fn) {\n\treturn definition[1]\n\t\t? assign({}, assign(ctx.$$scope.ctx, definition[1](fn ? fn(ctx) : {})))\n\t\t: ctx.$$scope.ctx;\n}\n\nfunction get_slot_changes(definition, ctx, changed, fn) {\n\treturn definition[1]\n\t\t? assign({}, assign(ctx.$$scope.changed || {}, definition[1](fn ? fn(changed) : {})))\n\t\t: ctx.$$scope.changed || {};\n}\n\nfunction exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\nlet now = typeof window !== 'undefined'\n\t? () => window.performance.now()\n\t: () => Date.now();\n\n// used internally for testing\nfunction set_now(fn) {\n\tnow = fn;\n}\n\nconst tasks = new Set();\nlet running = false;\n\nfunction run_tasks() {\n\ttasks.forEach(task => {\n\t\tif (!task[0](now())) {\n\t\t\ttasks.delete(task);\n\t\t\ttask[1]();\n\t\t}\n\t});\n\n\trunning = tasks.size > 0;\n\tif (running) requestAnimationFrame(run_tasks);\n}\n\nfunction clear_loops() {\n\t// for testing...\n\ttasks.forEach(task => tasks.delete(task));\n\trunning = false;\n}\n\nfunction loop(fn) {\n\tlet task;\n\n\tif (!running) {\n\t\trunning = true;\n\t\trequestAnimationFrame(run_tasks);\n\t}\n\n\treturn {\n\t\tpromise: new Promise(fulfil => {\n\t\t\ttasks.add(task = [fn, fulfil]);\n\t\t}),\n\t\tabort() {\n\t\t\ttasks.delete(task);\n\t\t}\n\t};\n}\n\nfunction append(target, node) {\n\ttarget.appendChild(node);\n}\n\nfunction insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\nfunction detach(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detach_between(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detach_before(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detach_after(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\nfunction element(name) {\n\treturn document.createElement(name);\n}\n\nfunction object_without_properties(obj, exclude) {\n\tconst target = {};\n\tfor (const k in obj) {\n\t\tif (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) {\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\nfunction svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction text(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction space() {\n\treturn text(' ');\n}\n\nfunction empty() {\n\treturn text('');\n}\n\nfunction listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\nfunction prevent_default(fn) {\n\treturn function(event) {\n\t\tevent.preventDefault();\n\t\treturn fn.call(this, event);\n\t};\n}\n\nfunction stop_propagation(fn) {\n\treturn function(event) {\n\t\tevent.stopPropagation();\n\t\treturn fn.call(this, event);\n\t};\n}\n\nfunction attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse node.setAttribute(attribute, value);\n}\n\nfunction set_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tif (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key in node) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\nfunction set_custom_element_data(node, prop, value) {\n\tif (prop in node) {\n\t\tnode[prop] = value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\nfunction xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction get_binding_group_value(group) {\n\tconst value = [];\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction to_number(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children(element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claim_element(nodes, name, attributes, svg) {\n\tfor (let i = 0; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (let j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? svg_element(name) : element(name);\n}\n\nfunction claim_text(nodes, data) {\n\tfor (let i = 0; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn text(data);\n}\n\nfunction set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data !== data) text.data = data;\n}\n\nfunction set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\nfunction set_style(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction select_option(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction select_value(select) {\n\tconst selected_option = select.querySelector(':checked') || select.options[0];\n\treturn selected_option && selected_option.__value;\n}\n\nfunction select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n\nfunction add_resize_listener(element, fn) {\n\tif (getComputedStyle(element).position === 'static') {\n\t\telement.style.position = 'relative';\n\t}\n\n\tconst object = document.createElement('object');\n\tobject.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n\tobject.type = 'text/html';\n\n\tlet win;\n\n\tobject.onload = () => {\n\t\twin = object.contentDocument.defaultView;\n\t\twin.addEventListener('resize', fn);\n\t};\n\n\tif (/Trident/.test(navigator.userAgent)) {\n\t\telement.appendChild(object);\n\t\tobject.data = 'about:blank';\n\t} else {\n\t\tobject.data = 'about:blank';\n\t\telement.appendChild(object);\n\t}\n\n\treturn {\n\t\tcancel: () => {\n\t\t\twin && win.removeEventListener && win.removeEventListener('resize', fn);\n\t\t\telement.removeChild(object);\n\t\t}\n\t};\n}\n\nfunction toggle_class(element, name, toggle) {\n\telement.classList[toggle ? 'add' : 'remove'](name);\n}\n\nfunction custom_event(type, detail) {\n\tconst e = document.createEvent('CustomEvent');\n\te.initCustomEvent(type, false, false, detail);\n\treturn e;\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + (b - a) * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\n\tconst rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n\tconst name = `__svelte_${hash(rule)}_${uid}`;\n\n\tif (!current_rules[name]) {\n\t\tif (!stylesheet) {\n\t\t\tconst style = element('style');\n\t\t\tdocument.head.appendChild(style);\n\t\t\tstylesheet = style.sheet;\n\t\t}\n\n\t\tcurrent_rules[name] = true;\n\t\tstylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n\t}\n\n\tconst animation = node.style.animation || '';\n\tnode.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n\n\tactive += 1;\n\treturn name;\n}\n\nfunction delete_rule(node, name) {\n\tnode.style.animation = (node.style.animation || '')\n\t\t.split(', ')\n\t\t.filter(name\n\t\t\t? anim => anim.indexOf(name) < 0 // remove specific animation\n\t\t\t: anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n\t\t)\n\t\t.join(', ');\n\n\tif (name && !--active) clear_rules();\n}\n\nfunction clear_rules() {\n\trequestAnimationFrame(() => {\n\t\tif (active) return;\n\t\tlet i = stylesheet.cssRules.length;\n\t\twhile (i--) stylesheet.deleteRule(i);\n\t\tcurrent_rules = {};\n\t});\n}\n\nfunction create_animation(node, from, fn, params) {\n\tif (!from) return noop;\n\n\tconst to = node.getBoundingClientRect();\n\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) return noop;\n\n\tconst {\n\t\tdelay = 0,\n\t\tduration = 300,\n\t\teasing = identity,\n\t\tstart: start_time = now() + delay,\n\t\tend = start_time + duration,\n\t\ttick = noop,\n\t\tcss\n\t} = fn(node, { from, to }, params);\n\n\tlet running = true;\n\tlet started = false;\n\tlet name;\n\n\tconst css_text = node.style.cssText;\n\n\tfunction start() {\n\t\tif (css) {\n\t\t\tif (delay) node.style.cssText = css_text; // TODO create delayed animation instead?\n\t\t\tname = create_rule(node, 0, 1, duration, 0, easing, css);\n\t\t}\n\n\t\tstarted = true;\n\t}\n\n\tfunction stop() {\n\t\tif (css) delete_rule(node, name);\n\t\trunning = false;\n\t}\n\n\tloop(now$$1 => {\n\t\tif (!started && now$$1 >= start_time) {\n\t\t\tstart();\n\t\t}\n\n\t\tif (started && now$$1 >= end) {\n\t\t\ttick(1, 0);\n\t\t\tstop();\n\t\t}\n\n\t\tif (!running) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (started) {\n\t\t\tconst p = now$$1 - start_time;\n\t\t\tconst t = 0 + 1 * easing(p / duration);\n\t\t\ttick(t, 1 - t);\n\t\t}\n\n\t\treturn true;\n\t});\n\n\tif (delay) {\n\t\tif (css) node.style.cssText += css(0, 1);\n\t} else {\n\t\tstart();\n\t}\n\n\ttick(0, 1);\n\n\treturn stop;\n}\n\nfunction fix_position(node) {\n\tconst style = getComputedStyle(node);\n\n\tif (style.position !== 'absolute' && style.position !== 'fixed') {\n\t\tconst { width, height } = style;\n\t\tconst a = node.getBoundingClientRect();\n\t\tnode.style.position = 'absolute';\n\t\tnode.style.width = width;\n\t\tnode.style.height = height;\n\t\tconst b = node.getBoundingClientRect();\n\n\t\tif (a.left !== b.left || a.top !== b.top) {\n\t\t\tconst style = getComputedStyle(node);\n\t\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\n\t\t\tnode.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n\t\t}\n\t}\n}\n\nlet current_component;\n\nfunction set_current_component(component) {\n\tcurrent_component = component;\n}\n\nfunction get_current_component() {\n\tif (!current_component) throw new Error(`Function called outside component initialization`);\n\treturn current_component;\n}\n\nfunction beforeUpdate(fn) {\n\tget_current_component().$$.before_render.push(fn);\n}\n\nfunction onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\nfunction afterUpdate(fn) {\n\tget_current_component().$$.after_render.push(fn);\n}\n\nfunction onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\nfunction createEventDispatcher() {\n\tconst component = current_component;\n\n\treturn (type, detail) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(type, detail);\n\t\t\tcallbacks.slice().forEach(fn => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t}\n\t};\n}\n\nfunction setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n}\n\nfunction getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\n\tif (callbacks) {\n\t\tcallbacks.slice().forEach(fn => fn(event));\n\t}\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\n\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\n\nfunction schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\nfunction tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\nfunction add_binding_callback(fn) {\n\tbinding_callbacks.push(fn);\n}\n\nfunction add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\nfunction add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\nfunction flush() {\n\tconst seen_callbacks = new Set();\n\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\twhile (dirty_components.length) {\n\t\t\tconst component = dirty_components.shift();\n\t\t\tset_current_component(component);\n\t\t\tupdate(component.$$);\n\t\t}\n\n\t\twhile (binding_callbacks.length) binding_callbacks.shift()();\n\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\twhile (render_callbacks.length) {\n\t\t\tconst callback = render_callbacks.pop();\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\tcallback();\n\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t}\n\t\t}\n\t} while (dirty_components.length);\n\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\n\tupdate_scheduled = false;\n}\n\nfunction update($$) {\n\tif ($$.fragment) {\n\t\t$$.update($$.dirty);\n\t\trun_all($$.before_render);\n\t\t$$.fragment.p($$.dirty, $$.ctx);\n\t\t$$.dirty = null;\n\n\t\t$$.after_render.forEach(add_render_callback);\n\t}\n}\n\nlet promise;\n\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\n\treturn promise;\n}\n\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nlet outros;\n\nfunction group_outros() {\n\toutros = {\n\t\tremaining: 0,\n\t\tcallbacks: []\n\t};\n}\n\nfunction check_outros() {\n\tif (!outros.remaining) {\n\t\trun_all(outros.callbacks);\n\t}\n}\n\nfunction on_outro(callback) {\n\toutros.callbacks.push(callback);\n}\n\nfunction create_in_transition(node, fn, params) {\n\tlet config = fn(node, params);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = identity,\n\t\t\ttick: tick$$1 = noop,\n\t\t\tcss\n\t\t} = config;\n\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick$$1(0, 1);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\n\t\tif (task) task.abort();\n\t\trunning = true;\n\n\t\ttask = loop(now$$1 => {\n\t\t\tif (running) {\n\t\t\t\tif (now$$1 >= end_time) {\n\t\t\t\t\ttick$$1(1, 0);\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn running = false;\n\t\t\t\t}\n\n\t\t\t\tif (now$$1 >= start_time) {\n\t\t\t\t\tconst t = easing((now$$1 - start_time) / duration);\n\t\t\t\t\ttick$$1(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tlet started = false;\n\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\n\t\t\tdelete_rule(node);\n\n\t\t\tif (typeof config === 'function') {\n\t\t\t\tconfig = config();\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction create_out_transition(node, fn, params) {\n\tlet config = fn(node, params);\n\tlet running = true;\n\tlet animation_name;\n\n\tconst group = outros;\n\n\tgroup.remaining += 1;\n\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = identity,\n\t\t\ttick: tick$$1 = noop,\n\t\t\tcss\n\t\t} = config;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\n\t\tloop(now$$1 => {\n\t\t\tif (running) {\n\t\t\t\tif (now$$1 >= end_time) {\n\t\t\t\t\ttick$$1(0, 1);\n\n\t\t\t\t\tif (!--group.remaining) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.callbacks);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (now$$1 >= start_time) {\n\t\t\t\t\tconst t = easing((now$$1 - start_time) / duration);\n\t\t\t\t\ttick$$1(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (typeof config === 'function') {\n\t\twait().then(() => {\n\t\t\tconfig = config();\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction create_bidirectional_transition(node, fn, params, intro) {\n\tlet config = fn(node, params);\n\n\tlet t = intro ? 0 : 1;\n\n\tlet running_program = null;\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\tfunction init(program, duration) {\n\t\tconst d = program.b - t;\n\t\tduration *= Math.abs(d);\n\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = identity,\n\t\t\ttick: tick$$1 = noop,\n\t\t\tcss\n\t\t} = config;\n\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\tprogram.group = outros;\n\t\t\toutros.remaining += 1;\n\t\t}\n\n\t\tif (running_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\n\t\t\tif (b) tick$$1(0, 1);\n\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\n\t\t\tloop(now$$1 => {\n\t\t\t\tif (pending_program && now$$1 > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now$$1 >= running_program.end) {\n\t\t\t\t\t\ttick$$1(t = running_program.b, 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro — we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro — needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.remaining) run_all(running_program.group.callbacks);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t}\n\n\t\t\t\t\telse if (now$$1 >= running_program.start) {\n\t\t\t\t\t\tconst p = now$$1 - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick$$1(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\trun(b) {\n\t\t\tif (typeof config === 'function') {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconfig = config();\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\nfunction handle_promise(promise, info) {\n\tconst token = info.token = {};\n\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\n\t\tinfo.resolved = key && { [key]: value };\n\n\t\tconst child_ctx = assign(assign({}, info.ctx), info.resolved);\n\t\tconst block = type && (info.current = type)(child_ctx);\n\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroup_outros();\n\t\t\t\t\t\ton_outro(() => {\n\t\t\t\t\t\t\tblock.d(1);\n\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tblock.o(1);\n\t\t\t\t\t\tcheck_outros();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\n\t\t\tblock.c();\n\t\t\tif (block.i) block.i(1);\n\t\t\tblock.m(info.mount(), info.anchor);\n\n\t\t\tflush();\n\t\t}\n\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t}\n\n\tif (is_promise(promise)) {\n\t\tpromise.then(value => {\n\t\t\tupdate(info.then, 1, info.value, value);\n\t\t}, error => {\n\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t});\n\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\n\t\tinfo.resolved = { [info.value]: promise };\n\t}\n}\n\nfunction destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\nfunction outro_and_destroy_block(block, lookup) {\n\ton_outro(() => {\n\t\tdestroy_block(block, lookup);\n\t});\n\n\tblock.o(1);\n}\n\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\nfunction update_keyed_each(old_blocks, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\tblock.p(changed, child_ctx);\n\t\t}\n\n\t\tnew_lookup.set(key, new_blocks[i] = block);\n\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\n\tfunction insert(block) {\n\t\tif (block.i) block.i(1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t}\n\n\t\telse if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t}\n\n\t\telse if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t}\n\n\t\telse if (did_move.has(old_key)) {\n\t\t\to--;\n\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\n\twhile (n) insert(new_blocks[n - 1]);\n\n\treturn new_blocks;\n}\n\nfunction measure(blocks) {\n\tconst rects = {};\n\tlet i = blocks.length;\n\twhile (i--) rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n\treturn rects;\n}\n\nfunction get_spread_update(levels, updates) {\n\tconst update = {};\n\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\n\treturn update;\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\n\nfunction spread(args) {\n\tconst attributes = Object.assign({}, ...args);\n\tlet str = '';\n\n\tObject.keys(attributes).forEach(name => {\n\t\tif (invalid_attribute_name_character.test(name)) return;\n\n\t\tconst value = attributes[name];\n\t\tif (value === undefined) return;\n\t\tif (value === true) str += \" \" + name;\n\n\t\tconst escaped = String(value)\n\t\t\t.replace(/\"/g, '&#34;')\n\t\t\t.replace(/'/g, '&#39;');\n\n\t\tstr += \" \" + name + \"=\" + JSON.stringify(escaped);\n\t});\n\n\treturn str;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t\"'\": '&#39;',\n\t'&': '&amp;',\n\t'<': '&lt;',\n\t'>': '&gt;'\n};\n\nfunction escape(html) {\n\treturn String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\n\nfunction each(items, fn) {\n\tlet str = '';\n\tfor (let i = 0; i < items.length; i += 1) {\n\t\tstr += fn(items[i], i);\n\t}\n\treturn str;\n}\n\nconst missing_component = {\n\t$$render: () => ''\n};\n\nfunction validate_component(component, name) {\n\tif (!component || !component.$$render) {\n\t\tif (name === 'svelte:component') name += ' this={...}';\n\t\tthrow new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n\t}\n\n\treturn component;\n}\n\nfunction debug(file, line, column, values) {\n\tconsole.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n\tconsole.log(values); // eslint-disable-line no-console\n\treturn '';\n}\n\nlet on_destroy;\n\nfunction create_ssr_component(fn) {\n\tfunction $$render(result, props, bindings, slots) {\n\t\tconst parent_component = current_component;\n\n\t\tconst $$ = {\n\t\t\ton_destroy,\n\t\t\tcontext: new Map(parent_component ? parent_component.$$.context : []),\n\n\t\t\t// these will be immediately discarded\n\t\t\ton_mount: [],\n\t\t\tbefore_render: [],\n\t\t\tafter_render: [],\n\t\t\tcallbacks: blank_object()\n\t\t};\n\n\t\tset_current_component({ $$ });\n\n\t\tconst html = fn(result, props, bindings, slots);\n\n\t\tset_current_component(parent_component);\n\t\treturn html;\n\t}\n\n\treturn {\n\t\trender: (props = {}, options = {}) => {\n\t\t\ton_destroy = [];\n\n\t\t\tconst result = { head: '', css: new Set() };\n\t\t\tconst html = $$render(result, props, {}, options);\n\n\t\t\trun_all(on_destroy);\n\n\t\t\treturn {\n\t\t\t\thtml,\n\t\t\t\tcss: {\n\t\t\t\t\tcode: Array.from(result.css).map(css => css.code).join('\\n'),\n\t\t\t\t\tmap: null // TODO\n\t\t\t\t},\n\t\t\t\thead: result.head\n\t\t\t};\n\t\t},\n\n\t\t$$render\n\t};\n}\n\nfunction get_store_value(store) {\n\tlet value;\n\tstore.subscribe(_ => value = _)();\n\treturn value;\n}\n\nfunction bind(component, name, callback) {\n\tif (component.$$.props.indexOf(name) === -1) return;\n\tcomponent.$$.bound[name] = callback;\n\tcallback(component.$$.ctx[name]);\n}\n\nfunction mount_component(component, target, anchor) {\n\tconst { fragment, on_mount, on_destroy, after_render } = component.$$;\n\n\tfragment.m(target, anchor);\n\n\t// onMount happens after the initial afterUpdate. Because\n\t// afterUpdate callbacks happen in reverse order (inner first)\n\t// we schedule onMount callbacks before afterUpdate callbacks\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = on_mount.map(run).filter(is_function);\n\t\tif (on_destroy) {\n\t\t\ton_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\n\tafter_render.forEach(add_render_callback);\n}\n\nfunction destroy(component, detaching) {\n\tif (component.$$) {\n\t\trun_all(component.$$.on_destroy);\n\t\tcomponent.$$.fragment.d(detaching);\n\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\tcomponent.$$.on_destroy = component.$$.fragment = null;\n\t\tcomponent.$$.ctx = {};\n\t}\n}\n\nfunction make_dirty(component, key) {\n\tif (!component.$$.dirty) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty = blank_object();\n\t}\n\tcomponent.$$.dirty[key] = true;\n}\n\nfunction init(component, options, instance, create_fragment, not_equal$$1, prop_names) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\n\tconst props = options.props || {};\n\n\tconst $$ = component.$$ = {\n\t\tfragment: null,\n\t\tctx: null,\n\n\t\t// state\n\t\tprops: prop_names,\n\t\tupdate: noop,\n\t\tnot_equal: not_equal$$1,\n\t\tbound: blank_object(),\n\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\tbefore_render: [],\n\t\tafter_render: [],\n\t\tcontext: new Map(parent_component ? parent_component.$$.context : []),\n\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty: null\n\t};\n\n\tlet ready = false;\n\n\t$$.ctx = instance\n\t\t? instance(component, props, (key, value) => {\n\t\t\tif ($$.ctx && not_equal$$1($$.ctx[key], $$.ctx[key] = value)) {\n\t\t\t\tif ($$.bound[key]) $$.bound[key](value);\n\t\t\t\tif (ready) make_dirty(component, key);\n\t\t\t}\n\t\t})\n\t\t: props;\n\n\t$$.update();\n\tready = true;\n\trun_all($$.before_render);\n\t$$.fragment = create_fragment($$.ctx);\n\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\t$$.fragment.l(children(options.target));\n\t\t} else {\n\t\t\t$$.fragment.c();\n\t\t}\n\n\t\tif (options.intro && component.$$.fragment.i) component.$$.fragment.i();\n\t\tmount_component(component, options.target, options.anchor);\n\t\tflush();\n\t}\n\n\tset_current_component(parent_component);\n}\n\nlet SvelteElement;\nif (typeof HTMLElement !== 'undefined') {\n\tSvelteElement = class extends HTMLElement {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t}\n\n\t\tconnectedCallback() {\n\t\t\tfor (const key in this.$$.slotted) {\n\t\t\t\tthis.appendChild(this.$$.slotted[key]);\n\t\t\t}\n\t\t}\n\n\t\tattributeChangedCallback(attr$$1, oldValue, newValue) {\n\t\t\tthis[attr$$1] = newValue;\n\t\t}\n\n\t\t$destroy() {\n\t\t\tdestroy(this, true);\n\t\t\tthis.$destroy = noop;\n\t\t}\n\n\t\t$on(type, callback) {\n\t\t\t// TODO should this delegate to addEventListener?\n\t\t\tconst callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n\t\t\tcallbacks.push(callback);\n\n\t\t\treturn () => {\n\t\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t\t};\n\t\t}\n\n\t\t$set() {\n\t\t\t// overridden by instance, if it has props\n\t\t}\n\t};\n}\n\nclass SvelteComponent {\n\t$destroy() {\n\t\tdestroy(this, true);\n\t\tthis.$destroy = noop;\n\t}\n\n\t$on(type, callback) {\n\t\tconst callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n\t\tcallbacks.push(callback);\n\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t$set() {\n\t\t// overridden by instance, if it has props\n\t}\n}\n\nclass SvelteComponentDev extends SvelteComponent {\n\tconstructor(options) {\n\t\tif (!options || (!options.target && !options.$$inline)) {\n\t\t\tthrow new Error(`'target' is a required option`);\n\t\t}\n\n\t\tsuper();\n\t}\n\n\t$destroy() {\n\t\tsuper.$destroy();\n\t\tthis.$destroy = () => {\n\t\t\tconsole.warn(`Component was already destroyed`); // eslint-disable-line no-console\n\t\t};\n\t}\n}\n\nexport { create_animation, fix_position, handle_promise, append, insert, detach, detach_between, detach_before, detach_after, destroy_each, element, object_without_properties, svg_element, text, space, empty, listen, prevent_default, stop_propagation, attr, set_attributes, set_custom_element_data, xlink_attr, get_binding_group_value, to_number, time_ranges_to_array, children, claim_element, claim_text, set_data, set_input_type, set_style, select_option, select_options, select_value, select_multiple_value, add_resize_listener, toggle_class, custom_event, destroy_block, outro_and_destroy_block, fix_and_outro_and_destroy_block, update_keyed_each, measure, current_component, set_current_component, beforeUpdate, onMount, afterUpdate, onDestroy, createEventDispatcher, setContext, getContext, bubble, clear_loops, loop, dirty_components, intros, schedule_update, tick, add_binding_callback, add_render_callback, add_flush_callback, flush, get_spread_update, invalid_attribute_name_character, spread, escaped, escape, each, missing_component, validate_component, debug, create_ssr_component, get_store_value, group_outros, check_outros, on_outro, create_in_transition, create_out_transition, create_bidirectional_transition, noop, identity, assign, is_promise, add_location, run, blank_object, run_all, is_function, safe_not_equal, not_equal, validate_store, subscribe, create_slot, get_slot_context, get_slot_changes, exclude_internal_props, now, set_now, bind, mount_component, init, SvelteElement, SvelteComponent, SvelteComponentDev };\n","\nlet t  =  {};\n\n// @params: command=string, value=null\nexport const exec = (command, value = null) => {\n  document.execCommand(command, false, value)\n}\n\n//@params element: HtmlElement, tags:string[]\nexport const getTagsRecursive = (element, tags) => {\n  tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n  if (element && element.parentNode) {\n    element = element.parentNode;\n  } else {\n    return tags;\n  }\n\n  const tag = element.tagName;\n  if (element.style && element.getAttribute) {\n    [element.style.textAlign || element.getAttribute('align'), element.style.color || tag === 'FONT' && 'forecolor', element.style.backgroundColor && 'backcolor']\n      .filter((item) => item) // item: type: string\n      .forEach((item) => tags.push(item));\n  }\n\n  if (tag === 'DIV') {\n    return tags;\n  }\n\n  tags.push(tag);\n\n  return getTagsRecursive(element, tags).filter((_tag) => _tag != null);\n}\n\n// @params editor: HTMLElement\nexport const saveRange = (editor) => {\n  const documentSelection = document.getSelection();\n\n  t.range = null;\n\n  if (documentSelection.rangeCount) {\n      let savedRange = t.range = documentSelection.getRangeAt(0);\n      let range = document.createRange();\n      let rangeStart;\n      range.selectNodeContents(editor);\n      range.setEnd(savedRange.startContainer, savedRange.startOffset);\n      rangeStart = (range + '').length;\n      t.metaRange = {\n          start: rangeStart,\n          end: rangeStart + (savedRange + '').length\n      };\n  }\n}\n// @params editor: HTMLElement\nexport const restoreRange = (editor) => {\n  let metaRange = t.metaRange;\n  let savedRange = t.range;\n  let documentSelection = document.getSelection();\n  let range;\n\n  if (!savedRange) {\n      return;\n  }\n\n  if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n      let charIndex = 0,\n          nodeStack = [editor],\n          node,\n          foundStart = false,\n          stop = false;\n\n      range = document.createRange();\n\n      while (!stop && (node = nodeStack.pop())) {\n          if (node.nodeType === 3) {\n              let nextCharIndex = charIndex + node.length;\n              if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                  range.setStart(node, metaRange.start - charIndex);\n                  foundStart = true;\n              }\n              if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                  range.setEnd(node, metaRange.end - charIndex);\n                  stop = true;\n              }\n              charIndex = nextCharIndex;\n          } else {\n              let cn = node.childNodes;\n              let i = cn.length;\n\n              while (i > 0) {\n                  i -= 1;\n                  nodeStack.push(cn[i]);\n              }\n          }\n      }\n  }\n\n  documentSelection.removeAllRanges();\n  documentSelection.addRange(range || savedRange);\n}\n\n// @params input: string\nexport const cleanHtml = (input) => {\n  const html = input.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);\n  let output = html && html[1] || input;\n  output = output\n    .replace(/\\r?\\n|\\r/g, ' ')\n    .replace(/<!--(.*?)-->/g, '')\n    .replace(new RegExp('<(/)*(meta|link|span|\\\\?xml:|st1:|o:|font|w:sdt)(.*?)>', 'gi'), '')\n    .replace(/<!\\[if !supportLists\\]>(.*?)<!\\[endif\\]>/gi, '')\n    .replace(/style=\"[^\"]*\"/gi, '')\n    .replace(/style='[^']*'/gi, '')\n    .replace(/&nbsp;/gi, ' ')\n    .replace(/>(\\s+)</g, '><')\n    .replace(/class=\"[^\"]*\"/gi, '')\n    .replace(/class='[^']*'/gi, '')\n    .replace(/<[^/].*?>/g, i => i.split(/[ >]/g)[0] + '>')\n    .trim()\n\n    output = removeBadTags(output);\n    return output;\n}\n// @params wrapper: Node html element node\nexport const unwrap = (wrapper) => {\n\tconst docFrag = document.createDocumentFragment();\n\twhile (wrapper.firstChild) {\n\t\tconst child = wrapper.removeChild(wrapper.firstChild);\n\t\tdocFrag.appendChild(child);\n\t}\n\n\t// replace wrapper with document fragment\n\twrapper.parentNode.replaceChild(docFrag, wrapper);\n}\n\n// @params elements: HTMLCollection, tagsToRemove: string[]\nexport const removeBlockTagsRecursive = (elements, tagsToRemove) => {\n  Array.from(elements).forEach((item) => {\n    if (tagsToRemove.some((tag) => tag === item.tagName.toLowerCase())) {\n      if (item.children.length) {\n        removeBlockTagsRecursive(item.children, tagsToRemove);\n      }\n      unwrap(item);\n    }\n  });\n}\n\nexport const getActionBtns = (actions) => {\n  return Object.keys(actions).map((action) => actions[action]);\n}\n\nexport const getNewActionObj = (actions, userActions = []) => {\n    if (userActions && userActions.length) {\n        const newActions = {};\n        userActions.forEach((action) => {\n            if (typeof action === 'string') {\n                newActions[action] = Object.assign({}, actions[action]);\n            } else if (actions[action.name]) {\n                newActions[action.name] = Object.assign(actions[action.name], action);\n            } else {\n                newActions[action.name] = Object.assign({}, action);\n            }\n        });\n    \n        return newActions;\n    } else {\n        return actions;\n    }\n}\n\nexport const removeBadTags = (html) => {\n    ['style', 'script', 'applet', 'embed', 'noframes', 'noscript'].forEach((badTag) => {\n        html = html.replace(new RegExp(`<${badTag}.*?${badTag}(.*?)>`, 'gi'), '')\n    });\n\n    return html;\n}\n\nexport const isEditorClick = (target, editorWrapper) => {\n    if (target === editorWrapper) {\n        return true;\n    }\n    if (target.parentElement) {\n        return isEditorClick(target.parentElement, editorWrapper);\n    }\n    return false;\n}","<script>\n    import {onMount} from 'svelte';\n    import { createEventDispatcher } from 'svelte';\n    const dispatchEvent = createEventDispatcher();\n\n    export let show = false;\n    export let text =  '';\n    export let event = '';\n    export let title =  '';\n    export let label = '';\n    export let error = false;\n    let inputEl;\n\n    onMount(()=> {\n        if (show) {\n            setTimeout(() => {\n                text.focus();\n            });\n        }\n    });\n        \n    let methods= {\n            confirm: function(ev) {\n                ev.preventDefault();\n                if (text) {\n                    console.log(text, event);\n                    dispatchEvent(event, text);\n                    methods.cancel();\n                } else {\n                    error = true;\n                    inputEl.focus();\n                }\n            },\n            cancel: function() {\n                show  = false; \n                text  = '';\n                error = false;\n            },\n            hideError: function() {\n                error = false;\n            }\n        };\n</script>\n\n<style>\n    .cl-editor-modal {\n        position: absolute;\n        top: 37px;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        transform: translateX(-50%);\n        max-width: 520px;\n        width: 100%;\n        height: 140px;\n        backface-visibility: hidden;\n        z-index: 11;\n    }\n\n    .cl-editor-overlay {\n        position: absolute;\n        background-color: rgba(255,255,255,.5);\n        height: 100%;\n        width: 100%;\n        left: 0;\n        top: 0;\n        z-index: 10;\n    }\n\n    .modal-box {\n        position: absolute;\n        top: 0;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        transform: translateX(-50%);\n        max-width: 500px;\n        width: calc(100% - 20px);\n        padding-bottom: 36px;\n        z-index: 1;\n        background-color: #FFF;\n        text-align: center;\n        font-size: 14px;\n        box-shadow: rgba(0,0,0,.2) 0 2px 3px;\n        -webkit-backface-visibility: hidden;\n        backface-visibility: hidden;\n    }\n\n    .modal-title {\n        font-size: 24px;\n        font-weight: 700;\n        margin: 0 0 20px;\n        padding: 2px 0 4px;\n        display: block;\n        border-bottom: 1px solid #EEE;\n        color: #333;\n        background: #fbfcfc;\n    }\n\n    .modal-label {\n        display: block;\n        position: relative;\n        margin: 15px 12px;\n        height: 29px;\n        line-height: 29px;\n        overflow: hidden;\n    }\n\n    .modal-label input {\n        position: absolute;\n        top: 0;\n        right: 0;\n        height: 27px;\n        line-height: 25px;\n        border: 1px solid #DEDEDE;\n        background: #fff;\n        font-size: 14px;\n        max-width: 330px;\n        width: 70%;\n        padding: 0 7px;\n        transition: all 150ms;\n    }\n\n    .modal-label input:focus {\n        outline: none;\n    }\n\n    .input-error input {\n        border: 1px solid #e74c3c;\n    }\n\n    .input-info {\n        display: block;\n        text-align: left;\n        height: 25px;\n        line-height: 25px;\n        transition: all 150ms;\n    }\n\n    .input-info span {\n        display: block;\n        color: #69878f;\n        background-color: #fbfcfc;\n        border: 1px solid #DEDEDE;\n        padding: 0 7px;\n        width: 150px;\n    }\n\n    .input-error .input-info {\n        margin-top: -27px;\n    }\n\n    .input-error .msg-error {\n        color: #e74c3c;\n    }\n\n    .modal-button {\n        position: absolute;\n        bottom: 10px;\n        right: 0;\n        text-decoration: none;\n        color: #FFF;\n        display: block;\n        width: 100px;\n        height: 35px;\n        line-height: 33px;\n        margin: 0 10px;\n        background-color: #333;\n        border: none;\n        cursor: pointer;\n        font-family: \"Lato\",Helvetica,Verdana,sans-serif;\n        font-size: 16px;\n        transition: all 150ms;\n    }\n\n    .modal-submit {\n        right: 110px;\n        background: #2bc06a;\n    }\n\n    .modal-reset {\n        color: #555;\n        background: #e6e6e6;\n    }\n</style>\n\n<div style=\"display:{show ? 'block' : 'none'}\">\n        <div class=\"cl-editor-overlay\" on:click={methods.cancel}></div>\n        <div class=\"cl-editor-modal\">\n            <div class=\"modal-box\">\n                <span class=\"modal-title\">{title}</span>\n                <form on:submit={methods.confirm}>\n                    <label class=\"modal-label {error ? 'input-error' : ''}\">\n                        <input bind:this={inputEl} on:keyup={methods.hideError} type=\"text\" name=\"text\" bind:value={text}>\n                        <span class=\"input-info\">\n                            <span>{label}</span>\n                            {#if error}\n                            <span class=\"msg-error\">Required</span>\n                            {/if}\n                        </span>\n                    </label>\n                    <button class=\"modal-button modal-submit\" type=\"submit\">Confirm</button>\n                    <button class=\"modal-button modal-reset\" type=\"reset\" on:click={methods.cancel}>Cancel</button>\n                </form>\n            </div>\n        </div>\n    </div>\n    ","<div style=\"display:{show ? 'block' : 'none'}\">\n    <div class=\"color-picker-overlay\" on:click={methods.close}></div>\n    <div class=\"color-picker-wrapper\">\n        {#each btns as btn}\n        <button type=\"button\" class=\"color-picker-btn\" style=\"background-color:{btn.color}\" on:click={methods.selectColor(btn)}>{btn.text || ''}</button>\n        {/each}\n    </div>\n</div>\n\n<script>\n    import {onMount, createEventDispatcher} from 'svelte';\n\n    const dispatchEvent = createEventDispatcher();\n\n    const colors = ['ffffff', '000000', 'eeece1', '1f497d', '4f81bd', 'c0504d', '9bbb59', '8064a2', '4bacc6', 'f79646', 'ffff00', 'f2f2f2', '7f7f7f', 'ddd9c3', 'c6d9f0', 'dbe5f1', 'f2dcdb', 'ebf1dd', 'e5e0ec', 'dbeef3', 'fdeada', 'fff2ca', 'd8d8d8', '595959', 'c4bd97', '8db3e2', 'b8cce4', 'e5b9b7', 'd7e3bc', 'ccc1d9', 'b7dde8', 'fbd5b5', 'ffe694', 'bfbfbf', '3f3f3f', '938953', '548dd4', '95b3d7', 'd99694', 'c3d69b', 'b2a2c7', 'b7dde8', 'fac08f', 'f2c314', 'a5a5a5', '262626', '494429', '17365d', '366092', '953734', '76923c', '5f497a', '92cddc', 'e36c09', 'c09100', '7f7f7f', '0c0c0c', '1d1b10', '0f243e', '244061', '632423', '4f6128', '3f3151', '31859b', '974806', '7f6000']\n\n    const getBtns = () => {\n        const btns = colors.map((color) => ({ color: `#${color}` }));\n        btns.push({ text: '#', modal: true });\n        return btns;\n    }\n    export let show = false;\n    export let btns = [];\n    export let event = '';\n\n    onMount(()=> {\n        btns = getBtns();\n\n    });\n    let methods = {\n            close: function() {\n                show =  false;\n            },\n            selectColor: (btn) => (ev) => {\n                ev.preventDefault();\n                console.log(event, btn);\n                dispatchEvent(event, btn);\n                methods.close();\n            }\n        };\n\n</script>\n\n<style>\n    .color-picker-wrapper {\n        border: 1px solid #ecf0f1;\n        border-top: none;\n        background: #FFF;\n        box-shadow: rgba(0,0,0,.1) 0 2px 3px;\n        width: 290px;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        transform: translateX(-50%);\n        padding: 0;\n        position: absolute;\n        top: 37px;\n        z-index: 11;\n    }\n\n    .color-picker-overlay {\n        position: absolute;\n        background-color: rgba(255,255,255,.5);\n        height: 100%;\n        width: 100%;\n        left: 0;\n        top: 0;\n        z-index: 10;\n    }\n\n    .color-picker-btn {\n        display: block;\n        position: relative;\n        float: left;\n        height: 20px;\n        width: 20px;\n        border: 1px solid #333;\n        padding: 0;\n        margin: 2px;\n        line-height: 35px;\n        text-decoration: none;\n        background: #FFF;\n        color: #333!important;\n        cursor: pointer;\n        text-align: left;\n        font-size: 15px;\n        transition: all 150ms;\n        line-height: 20px;\n        padding: 0px 5px;\n    }\n\n    .color-picker-btn:hover::after {\n        content: \" \";\n        display: block;\n        position: absolute;\n        top: -5px;\n        left: -5px;\n        height: 27px;\n        width: 27px;\n        background: inherit;\n        border: 1px solid #FFF;\n        box-shadow: #000 0 0 2px;\n        z-index: 10;\n    }\n</style>","import {exec, removeBlockTagsRecursive, getActionBtns, saveRange, restoreRange, unwrap} from './util';\n\nconst linkSvg = '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M31.1 48.9l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9L15 50.4c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L11 41.8c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7c2.5-2.6 3.1-6.7 1.5-10l-5.9 5.9zM38.7 22.5l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2L42 38c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1c0 .1 0 .1 0 0z\"></path><path d=\"M44.2 30.5c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.3-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.9 40.6c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM49.9 55.4h-8.5v-5h8.5v-8.9h5.2v8.9h8.5v5h-8.5v8.9h-5.2v-8.9z\"></path></svg>';\nconst unlinkSvg = '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M30.9 49.1l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9l-5.2-5.2c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L10.8 42c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7C38 50.5 38.6 46.3 37 43l-6.1 6.1zM38.5 22.7l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2-6.5 6.5c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1z\"></path><path d=\"M44.1 30.7c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.2-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.8 40.8c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM41.3 55.8v-5h22.2v5H41.3z\"></path></svg>';\n\nexport const createActions = ({editor, helper, store, raw, modal, colorPicker}) => {\n\n  const showColorPicker = function(cmd) {\n    saveRange(editor);\n    colorPicker.$set({show: true, event: cmd});\n    if (!helper[cmd]) {\n      helper[cmd] = true;\n      colorPicker.$on(cmd, (item) => {\n        if (item.detail.modal) {\n          modal.$set({show: true, event: 'colorHref', title: 'Text color', label: cmd === 'foreColor' ? 'Text color' : 'Background color'});\n          const command = cmd;\n          if (!helper[`${command}Modal`]) {\n            helper[`${command}Modal`] = true;\n            modal.$on('colorHref', (item) => {\n              restoreRange(editor);\n              exec(command, item.detail.color);\n            });\n          }\n        } else {\n          restoreRange(editor);\n          exec(cmd, item.detail.color);\n        }\n      });\n    }\n  }\n\n\n  return {\n    viewHtml: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path fill=\"none\" stroke=\"currentColor\" stroke-width=\"8\" stroke-miterlimit=\"10\" d=\"M26.9 17.9L9 36.2 26.9 54M45 54l17.9-18.3L45 17.9\"></path></svg>',\n      title: 'View HTML',\n      result: function(state) {\n        helper.showEditor = !helper.showEditor;\n        editor.style.display = helper.showEditor ? 'block' : 'none';\n        raw.style.display = helper.showEditor ? 'none' : 'block';\n        if (helper.showEditor) {\n          editor.innerHTML = raw.value;\n        } else {\n          raw.value = editor.innerHTML;\n        }\n        setTimeout(() =>{\n          Object.keys(state.actionObj).forEach((action) => state.actionObj[action].disabled = !helper.showEditor);\n          state.actionObj.viewHtml.disabled = false;\n          state.actionObj.viewHtml.active = !helper.showEditor;\n          store.update((s) => Object.assign(s, { actionBtns: getActionBtns(state.actionObj),  actionObj: state.actionObj}));\n        });\n      }\n    },\n    undo: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M61.2 51.2c0-5.1-2.1-9.7-5.4-13.1-3.3-3.3-8-5.4-13.1-5.4H26.1v-12L10.8 36l15.3 15.3V39.1h16.7c3.3 0 6.4 1.3 8.5 3.5 2.2 2.2 3.5 5.2 3.5 8.5h6.4z\"></path></svg>',\n      title: 'Undo',\n      result: () => exec('undo')\n    },\n    redo: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M10.8 51.2c0-5.1 2.1-9.7 5.4-13.1 3.3-3.3 8-5.4 13.1-5.4H46v-12L61.3 36 45.9 51.3V39.1H29.3c-3.3 0-6.4 1.3-8.5 3.5-2.2 2.2-3.5 5.2-3.5 8.5h-6.5z\"></path></svg>',\n      title: 'Redo',\n      result: () => exec('redo')\n    },\n    b: {\n      icon: '<b>B</b>',\n      title: 'Bold',\n      result: () => exec('bold')\n    },\n    i: {\n      icon: '<i>I</i>',\n      title: 'Italic',\n      result: () => exec('italic')\n    },\n    u: {\n      icon: '<u>U</u>',\n      title: 'Underline',\n      result: () => exec('underline')\n    },\n    strike: {\n      icon: '<strike>S</strike>',\n      title: 'Strike-through',\n      result: () => exec('strikeThrough')\n    },\n    sup: {\n      icon: 'A<sup>2</sup>',\n      title: 'Superscript',\n      result: () => exec('superscript')\n    },\n    sub: {\n      icon: 'A<sub>2</sub>',\n      title: 'Subscript',\n      result: () => exec('subscript')\n    },\n    h1: {\n      icon: '<b>H<sub>1</sub></b>',\n      title: 'Heading 1',\n      result: () => exec('formatBlock', '<H1>')\n    },\n    h2: {\n      icon: '<b>H<sub>2</sub></b>',\n      title: 'Heading 2',\n      result: () => exec('formatBlock', '<H2>')\n    },\n    p: {\n      icon: '&#182;',\n      title: 'Paragraph',\n      result: () => exec('formatBlock', '<P>')\n    },\n    blockquote: {\n      icon: '&#8220; &#8221;',\n      title: 'Quote',\n      result: () => exec('formatBlock', '<BLOCKQUOTE>')\n    },\n    ol: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM27 32h36v8H27zM11.8 15.8V22h1.8v-7.8h-1.5l-2.1 1 .3 1.3zM12.1 38.5l.7-.6c1.1-1 2.1-2.1 2.1-3.4 0-1.4-1-2.4-2.7-2.4-1.1 0-2 .4-2.6.8l.5 1.3c.4-.3 1-.6 1.7-.6.9 0 1.3.5 1.3 1.1 0 .9-.9 1.8-2.6 3.3l-1 .9V40H15v-1.5h-2.9zM13.3 53.9c1-.4 1.4-1 1.4-1.8 0-1.1-.9-1.9-2.6-1.9-1 0-1.9.3-2.4.6l.4 1.3c.3-.2 1-.5 1.6-.5.8 0 1.2.3 1.2.8 0 .7-.8.9-1.4.9h-.7v1.3h.7c.8 0 1.6.3 1.6 1.1 0 .6-.5 1-1.4 1-.7 0-1.5-.3-1.8-.5l-.4 1.4c.5.3 1.3.6 2.3.6 2 0 3.2-1 3.2-2.4 0-1.1-.8-1.8-1.7-1.9z\"></path></svg>',\n      title: 'Ordered List',\n      result: () => exec('insertOrderedList')\n    },\n    ul: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM9 50h9v8H9zM9 32h9v8H9zM9 14h9v8H9zM27 32h36v8H27z\"></path></svg>',\n      title: 'Unordered List',\n      result: () => exec('insertUnorderedList')\n    },\n    hr: {\n      icon: '&#8213;',\n      title: 'Horizontal Line',\n      result: () => exec('insertHorizontalRule')\n    },\n    left: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h36v8H9z\"></path></svg>',\n      title: 'Justify left',\n      result: () => exec('justifyLeft')\n    },\n    right: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM27 32h36v8H27z\"></path></svg>',\n      title: 'Justify right',\n      result: () => exec('justifyRight')\n    },\n    center: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM18 32h36v8H18z\"></path></svg>',\n      title: 'Justify center',\n      result: () => exec('justifyCenter')\n    },\n    justify: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h54v8H9z\"></path></svg>',\n      title: 'Justify full',\n      result: () => exec('justifyFull')\n    },\n    a: {\n      icon: linkSvg,\n      title: 'Insert link',\n      result: function(state) {\n          const actionObj = state.actionObj;\n          if (actionObj.a.active) {\n            const selection = window.getSelection();\n            const range = document.createRange();\n            range.selectNodeContents(document.getSelection().focusNode);\n            selection.removeAllRanges();\n            selection.addRange(range);\n            exec('unlink');\n            actionObj.a.title = 'Insert link';\n            actionObj.a.icon = linkSvg;\n            store.update((state) => Object.assign(state, { actionBtns: getActionBtns(actionObj),  actionObj: state.actionObj}));\n          } else {\n            saveRange(editor);\n            modal.$set({show: true, event: 'linkUrl', title: 'Insert link', label: 'Url'});\n            if (!helper.link) {\n              helper.link = true;\n              modal.$on('linkUrl', (item) => {\n                restoreRange(editor);\n                exec('createLink', item.detail);\n                actionObj.a.title = 'Unlink';\n                actionObj.a.icon = unlinkSvg;\n                store.update(s => Object.assign(s, {actionBtns: getActionBtns(actionObj), actionObj}));\n              });\n            }\n          }\n      }\n    },\n    removeFormat: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M58.2 54.6L52 48.5l3.6-3.6 6.1 6.1 6.4-6.4 3.8 3.8-6.4 6.4 6.1 6.1-3.6 3.6-6.1-6.1-6.4 6.4-3.7-3.8 6.4-6.4zM21.7 52.1H50V57H21.7zM18.8 15.2h34.1v6.4H39.5v24.2h-7.4V21.5H18.8v-6.3z\"></path></svg>',\n      title: 'Remove format',\n      result: function(state) {\n        const selection = window.getSelection();\n        if (!selection.toString().length) {\n          removeBlockTagsRecursive(editor.children, state.removeFormatTags);\n          const range = document.createRange();\n          range.selectNodeContents(editor);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n        exec('removeFormat');\n        selection.removeAllRanges();\n      }\n    },\n    image: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M64 17v38H8V17h56m8-8H0v54h72V9z\"></path><path d=\"M17.5 22C15 22 13 24 13 26.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5zM16 50h27L29.5 32zM36 36.2l8.9-8.5L60.2 50H45.9S35.6 35.9 36 36.2z\"></path></svg>',\n      title: 'Image',\n      result: function() {\n        saveRange(editor);\n        modal.$set({show: true, event: 'imageUrl', title: 'Insert image', label: 'Url'});\n        if (!helper.image) {\n          helper.image = true;\n          modal.$on('imageUrl', (item) => {\n            restoreRange(editor);\n            exec('insertImage', item.detail);\n          });\n        }\n      }\n    },\n    forecolor: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M32 15h7.8L56 57.1h-7.9l-4-11.1H27.4l-4 11.1h-7.6L32 15zm-2.5 25.4h12.9L36 22.3h-.2l-6.3 18.1z\"></path></svg>',\n      title: 'Text color',\n      colorPicker: true,\n      result: function() {\n        showColorPicker.call(null, 'foreColor');\n      }\n    },\n    backcolor: {\n      icon: '<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M36.5 22.3l-6.3 18.1H43l-6.3-18.1z\"></path><path d=\"M9 8.9v54.2h54.1V8.9H9zm39.9 48.2L45 46H28.2l-3.9 11.1h-7.6L32.8 15h7.8l16.2 42.1h-7.9z\"></path></svg>',\n      title: 'Background color',\n      colorPicker: true,\n      result: function() {\n        showColorPicker.call(null, 'backColor');\n      }\n    }\n  };\n};\n  \n","function noop() {}\n\nfunction run(fn) {\n\treturn fn();\n}\n\nfunction run_all(fns) {\n\tfns.forEach(run);\n}\n\nfunction is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nfunction safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param value initial value\n * @param start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (!stop) {\n                return; // not ready\n            }\n            subscribers.forEach((s) => s[1]());\n            subscribers.forEach((s) => s[0](value));\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe$$1(run$$1, invalidate = noop) {\n        const subscriber = [run$$1, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run$$1(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n            }\n        };\n    }\n    return { set, update, subscribe: subscribe$$1 };\n}\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n * @param stores input stores\n * @param fn function callback that aggregates the values\n * @param initial_value when used asynchronously\n */\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => store.subscribe((value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n * @param store readable\n */\nfunction get(store) {\n    let value;\n    store.subscribe((_) => value = _)();\n    return value;\n}\n\nexport { readable, writable, derived, get };\n","<script>\n  import {\n    getTagsRecursive,\n    saveRange,\n    restoreRange,\n    exec,\n    cleanHtml,\n    getActionBtns,\n    getNewActionObj,\n    removeBadTags,\n    isEditorClick\n  } from './helpers/util';\n\n  import EditorModal from \"./helpers/EditorModal.svelte\";\n  import EditorColorPicker from \"./helpers/EditorColorPicker.svelte\";\n  import {onMount} from 'svelte';\n  import {createActions} from './helpers/actions';\n  import { writable, get } from 'svelte/store';\n  import { createEventDispatcher } from 'svelte';\n\n  const dispatchEvent = createEventDispatcher();\n\n  const content = writable({});\n  \n  let editorWrapper;\n  let editor;\n  let raw;\n  let modal;\n  let colorPicker;\n  const helper = {};\n\n  \n  \n  export let actionBtns = [];\n  export let height = '300px';\n  export let html = '';\n  export let removeFormatTags =  ['h1', 'h2', 'blockquote'];\n  const actionObj = {};\n\n  onMount(()=> {\n    const _data = {actionBtns, height, html, removeFormatTags};\n    Object.assign(helper, {\n        foreColor: false,\n        backColor: false,\n        foreColorModal: false,\n        backColorModal: false,\n        image: false,\n        link: false,\n        showEditor: true,\n        blurActive: false\n    });\n    const modalEl = new EditorModal({ target: modal });\n    const colorPickerEl = new EditorColorPicker({ target: colorPicker });\n    const actions = createActions({helper, store: content, raw, editor, colorPicker: colorPickerEl, modal: modalEl});\n    Object.assign(actionObj, getNewActionObj(actions, _data.actions));\n    content.set({ actionBtns: getActionBtns(actionObj), actionObj });\n    methods.setHtml(_data.html);\n    content.subscribe(state =>{\n        actionBtns = state.actionBtns;\n        Object.assign(actionObj, state.actionObj);\n    });\n});\n\n    const methods = {\n      _btnClicked: function(action) {\n        editor.focus();\n        saveRange(editor);\n        restoreRange(editor);\n        action.result(get(content));\n        methods._handleButtonStatus();\n      },\n      _handleButtonStatus: function(clearBtns) {\n        const tags = clearBtns ? [] : getTagsRecursive(document.getSelection().focusNode);\n        Object.keys(actionObj).forEach((action) => actionObj[action].active = false);\n        tags.forEach((tag) => (actionObj[tag.toLowerCase()] || {}).active = true);\n        content.update(s=> Object.assign(s, { actionBtns: getActionBtns(actionObj), actionObj}));\n      },\n      _onPaste: function(event) {\n        event.preventDefault();\n        exec('insertHTML', event.clipboardData.getData('text/html') ? cleanHtml(event.clipboardData.getData('text/html')) : event.clipboardData.getData('text'));\n      },\n      _onChange: function(event) {\n        dispatchEvent('change', event.target.innerHTML);\n      },\n      _documentClick: function(event) {\n        if (!isEditorClick(event.target, editorWrapper) && helper.blurActive) {\n          dispatchEvent('blur', event);\n        }\n        helper.blurActive = true;\n      },\n      exec: (cmd, value) => {\n        exec(cmd, value);\n      },\n      getHtml: function(sanitize) {\n        return sanitize ? removeBadTags(editor.innerHTML) : editor.innerHTML;\n      },\n      getText: function() {\n        return editor.innerText;\n      },\n      setHtml: function(html, sanitize) {\n        editor.innerHTML = sanitize ? removeBadTags(html) : (html || '');\n      },\n      saveRange: function() {\n        saveRange(editor);\n      },\n      restoreRange: function() {\n        restoreRange(editor);\n      }\n    };\n\n\n</script>\n\n<style type=\"text/css\">\n  .cl * {\n    box-sizing: border-box;\n  }\n\n  .cl {\n    box-shadow: 0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n\n  .cl-content {\n    height: 300px;\n    outline: 0;\n    overflow-y: auto;\n    padding: 10px;\n    width: 100%;\n    background-color: white;\n  }\n\n  .cl-actionbar {\n    background-color: #ecf0f1;\n    border-bottom: 1px solid rgba(10, 10, 10, 0.1);\n    width: 100%;\n  }\n\n  .cl-button {\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    height: 35px;\n    outline: 0;\n    width: 35px;\n    vertical-align: top;\n    position: relative;\n  }\n\n  .cl-button:hover, .cl-button.active {\n    background-color: #fff;\n  }\n\n  .cl-button:disabled {\n    opacity: .5;\n    pointer-events: none;\n  }\n\n  .cl-textarea {\n    display: none;\n    max-width: 100%;\n    min-width: 100%;\n    border: none;\n    padding: 10px;\n  }\n\n  .cl-textarea:focus {\n    outline: none;\n  }\n\n\n</style>\n\n\n<svelte:window on:click={methods._documentClick}/>\n\n<div class=\"cl\" bind:this={editorWrapper}>\n  <div class=\"cl-actionbar\">\n    {#each actionBtns as action }\n      <button \n        class=\"cl-button {action.active ? 'active' : ''}\" \n        title=\"{action.title}\" \n        on:click={methods._btnClicked.bind(null,  action)} \n        disabled={action.disabled}>\n        {@html action.icon}\n      </button>\n    {/each}\n  </div>\n  <div bind:this={editor} \n    class=\"cl-content\"\n    style=\"height:{height}\"\n    contenteditable=\"true\"\n    on:input={methods._onChange} \n    on:mouseup={methods._handleButtonStatus}\n    on:keyup={methods._handleButtonStatus}\n    on:paste={methods._onPaste}>\n  </div>\n  \n  <textarea bind:this={raw} class=\"cl-textarea\" style=\"max-height: {height}; min-height: {height}\"></textarea>\n  <div bind:this={modal}></div>\n  <div bind:this={colorPicker}></div>\n</div>","import Editor from './Editor.svelte';\n\nconst app = new Editor({\n    target: document.body,\n    props: {\n\t  html: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean a odio neque. Duis ac laoreet lacus.',\n\t  height: '350px'\n    }\n});\n\nexport default app;"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","document","createElement","text","data","createTextNode","space","listen","event","handler","options","addEventListener","removeEventListener","set_data","set_style","key","value","style","setProperty","current_component","set_current_component","component","onMount","Error","get_current_component","$$","on_mount","push","createEventDispatcher","type","detail","callbacks","e","createEvent","initCustomEvent","custom_event","slice","call","dirty_components","resolved_promise","Promise","resolve","update_scheduled","binding_callbacks","render_callbacks","flush_callbacks","add_binding_callback","add_render_callback","flush","seen_callbacks","Set","shift","update","callback","pop","has","add","fragment","dirty","before_render","p","ctx","after_render","make_dirty","then","init","instance","create_fragment","not_equal$$1","prop_names","parent_component","props","not_equal","bound","on_destroy","context","Map","ready","hydrate","l","Array","from","childNodes","c","intro","m","new_on_destroy","map","filter","mount_component","SvelteComponent","[object Object]","this","$destroy","index","indexOf","splice","t","exec","command","execCommand","getTagsRecursive","tags","tagName","tag","getAttribute","textAlign","color","backgroundColor","item","_tag","saveRange","editor","documentSelection","getSelection","range","rangeCount","rangeStart","savedRange","getRangeAt","createRange","selectNodeContents","setEnd","startContainer","startOffset","metaRange","start","end","restoreRange","charIndex","nodeStack","foundStart","stop","nodeType","nextCharIndex","setStart","cn","removeAllRanges","addRange","cleanHtml","input","html","match","output","replace","RegExp","split","trim","removeBadTags","removeBlockTagsRecursive","elements","tagsToRemove","some","toLowerCase","children","wrapper","docFrag","createDocumentFragment","firstChild","child","replaceChild","unwrap","getActionBtns","actions","keys","action","getNewActionObj","userActions","newActions","assign","badTag","isEditorClick","editorWrapper","parentElement","attribute","title","label","removeAttribute","setAttribute","error","show","methods","cancel","hideError","confirm","dispatchEvent","inputEl","setTimeout","focus","ev","preventDefault","console","log","btn","selectColor","btns","close","colors","modal","getBtns","linkSvg","createActions","helper","store","raw","colorPicker","showColorPicker","cmd","$set","$on","viewHtml","icon","result","state","showEditor","display","innerHTML","actionObj","disabled","active","s","actionBtns","undo","redo","u","strike","sup","sub","h1","h2","blockquote","ol","ul","hr","left","right","center","justify","selection","window","focusNode","link","removeFormat","toString","removeFormatTags","image","forecolor","backcolor","_btnClicked","bind","height","_documentClick","_onChange","_handleButtonStatus","_onPaste","content","subscribers","set","new_value","subscribe","run$$1","invalidate","subscriber","writable","_data","foreColor","backColor","foreColorModal","backColorModal","blurActive","modalEl","EditorModal","colorPickerEl","EditorColorPicker","setHtml","_","get","clearBtns","clipboardData","getData","getHtml","sanitize","getText","innerText","body"],"mappings":"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"}